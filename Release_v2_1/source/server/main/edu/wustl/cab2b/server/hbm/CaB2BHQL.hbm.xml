<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<query name="getRootIdForDataList">
		select dataListMetadata.rootEntityId from
		edu.wustl.cab2b.common.domain.DataListMetadata dataListMetadata
		where dataListMetadata.id = ?
	</query>

	<query name="getAllDataLists">
		from edu.wustl.cab2b.common.domain.DataListMetadata
	</query>

	<query name="getExperimentSimilarDataList">
		select experiement from Experiment experiement join
		experiement.dataListMetadataCollection dataListMetadata where
		dataListMetadata.id = ? and experiement.userId = ?
	</query>

	<query name="getQueriesByUserName">
		from edu.wustl.cab2b.common.queryengine.Cab2bQuery cab2bQuery
		where cab2bQuery.userId = (Select user.userId from
		edu.wustl.cab2b.common.user.User user where user.userName = ?)
	</query>

	<query name="getLatestExperimentByUserName">
		from edu.wustl.cab2b.common.domain.Experiment Exp where
		Exp.userId = (Select user.userId from
		edu.wustl.cab2b.common.user.User user where user.userName = ?)
		order by Exp.lastUpdatedOn
	</query>

	<query name="getExperimentHierarchy">
		from edu.wustl.cab2b.common.domain.ExperimentGroup as ExpGrp
		where ExpGrp.parentGroup.id is null and ExpGrp.userId = (Select
		user.userId from edu.wustl.cab2b.common.user.User user where
		user.userName = ?)
	</query>

	<query name="getDataListIdByName">
		Select datalist.id from
		edu.wustl.cab2b.common.domain.DataListMetadata as datalist where
		datalist.name = ?
	</query>
	
	<query name="getExperimentIdByName">
		Select exp.id from
		edu.wustl.cab2b.common.domain.Experiment as exp where
		exp.name = ?
	</query>
	
	<query name="getExperimentGroupIdByName">
		Select expGrp.id from
		edu.wustl.cab2b.common.domain.ExperimentGroup as expGrp where
		expGrp.name = ?
	</query>


</hibernate-mapping>
